<html>

<head>
<title>Multiple Bubbles</title>

<style>
body {background-color:#FFFFF;}
div.example {float:left;}
div.example2 {float:left;}

</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="bubblechart.js"></script>
</head>


<body>
<h1>Comparing Metropolitan (left) and Merseyside (right)</h1>
<h2>May 2012</h2>
<div id="toggletest"><h2><a href="#">Show / Hide Bubbles!</a></h2></div>  

<script type="text/javascript">
	$(document).ready(
		function() {
			$("#toggletest").click(function() {
				$("#bubbles2").toggle(500);
			});
		});
</script>


<div id="bubbles1" class="example">
	<canvas id="bubblechart" height="500px" width="500px"></canvas>

	<script type="text/javascript">
	
	// Declare variable to save data in	
var myjson;
	
// Loading in JSON file	
$.ajax({
  url: 'crimeDict.json',
  async: false,
  dataType: 'json',
  success: function (json) {
  
	// Save data to myjson variable
    myjson = json;
  }
});
	
	mydata = []
	
// Colors for all types	
var colors = {"Anti-Social Behaviour": "#0076A3",
			 "Other Crime": "#FDC68A",
			 "Violent Crime": "#FFF79A",
			 "Other theft": "#82CA9D",
			 "Burglary": "#6ECFF6",
			 "Criminal damage and arson": "#8493CA",
			 "Vehicle Crime": "#827B00",
			 "Shoplifting": "#BC8DBF",
			 "Violence and sexual offences": "#002157",
			 "Drugs": "#C4DF9B",
			 "Robbery": "#B7B7B7",
			 "Public order": "#9E0B0F",
			 "Bicycle theft": "#1B1464",
			 "Theft from the person": "#F7977A",
			 "Possession of weapons": "#736357",
			 "Public disorder and weapons":"#A36209"}	
			 
// Map IDs to names			 
var typeNames = {"1": "Anti-Social Behaviour",
			 "2": "Bicycle theft",
			 "3": "Burglary",
			 "4": "Criminal damage and arson",
			 "5": "Drugs",
			 "6": "Other Crime",
			 "7": "Other theft",
			 "8": "Possession of weapons",
			 "9": "Public disorder and weapons",
			 "10": "Public order",
			 "11": "Robbery",
			 "12": "Shoplifting",
			 "13": "Theft from the person",
			 "14": "Vehicle Crime",
			 "15": "Violence and sexual offences",
			 "16": "Violent Crime",
			 }				 
	
// Function to read data for district and month	
function get_crimes(distID,year,month)
{
	var crimes = myjson[distID.toString()]['crimes'][year.toString()][month.toString()]['perType'];
	return crimes;
}
	
	
var crimeList = get_crimes(23,2012,5);


// Loop through list, add every type to data object
for (var type in crimeList)
	{
		mydata.push(
		
		{
			label: typeNames[type],
			data: parseInt(crimeList[type]),
			fillColor: colors[typeNames[type]],
			borderColor: "#000",
			borderSize: 0,
		});
	
	}
	
	
// Create Bubblechart	
		var chart = new BubbleChart({
		  canvasId: "bubblechart",
		  metric: "crimes",
		  usedArea: 0.25,
		  contain: true,
		  popoverOpts: {
			textFont: "Open Sans",
		  },
				data : mydata
			
		});

		chart.paint();

	</script>

</div>

<div id="bubbles2" class="example2">

	<canvas id="bubblechart2" height="500px" width="500px"></canvas>
	<script type="text/javascript">

	
	// Declare variable to save data in	
var myjson;
	
// Loading in JSON file	
$.ajax({
  url: 'crimeDict.json',
  async: false,
  dataType: 'json',
  success: function (json) {
  
	// Save data to myjson variable
    myjson = json;
  }
});
	
	mydata = []
	
	
var colors = {"Anti-Social Behaviour": "#0076A3",
			 "Other Crime": "#FDC68A",
			 "Violent Crime": "#FFF79A",
			 "Other theft": "#82CA9D",
			 "Burglary": "#6ECFF6",
			 "Criminal damage and arson": "#8493CA",
			 "Vehicle Crime": "#827B00",
			 "Shoplifting": "#BC8DBF",
			 "Violence and sexual offences": "#002157",
			 "Drugs": "#C4DF9B",
			 "Robbery": "#B7B7B7",
			 "Public order": "#9E0B0F",
			 "Bicycle theft": "#1B1464",
			 "Theft from the person": "#F7977A",
			 "Possession of weapons": "#736357",
			 "Public disorder and weapons":"#A36209"}	
			 
			 
var typeNames = {"1": "Anti-Social Behaviour",
			 "2": "Bicycle theft",
			 "3": "Burglary",
			 "4": "Criminal damage and arson",
			 "5": "Drugs",
			 "6": "Other Crime",
			 "7": "Other theft",
			 "8": "Possession of weapons",
			 "9": "Public disorder and weapons",
			 "10": "Public order",
			 "11": "Robbery",
			 "12": "Shoplifting",
			 "13": "Theft from the person",
			 "14": "Vehicle Crime",
			 "15": "Violence and sexual offences",
			 "16": "Violent Crime",
			 }				 
			 
function get_crimes(distID,year,month)
{
	var crimes = myjson[distID.toString()]['crimes'][year.toString()][month.toString()]['perType'];
	return crimes;
}
	
	
var crimeList = get_crimes(22,2012,5);

for (var type in crimeList)
	{
		mydata.push(
		
		{
			label: typeNames[type],
			data: parseInt(crimeList[type]),
			fillColor: colors[typeNames[type]],
			borderColor: "#000",
			borderSize: 0,
		});
	
	}
	
	
	
		var chart = new BubbleChart({
		  canvasId: "bubblechart2",
		  metric: "crimes",
		  usedArea: 0.25,
		  contain: true,
		  popoverOpts: {
			textFont: "Open Sans",
		  },
				data : mydata
			
		});

		chart.paint();


	</script>

</div>

</body>

</html>


